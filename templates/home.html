{% extends 'base.html' %}
{% block title %}Following{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-0">Following</h1>
    {% if request.user.is_authenticated %}
      <div class="btn-group">
        <a class="btn btn-outline-primary" href="/blog/post/new/article/">New Article</a>
        <a class="btn btn-outline-success" href="/blog/post/new/status/">New Post</a>
        <a class="btn btn-outline-warning" href="/blog/post/new/poll/">New Poll</a>
      </div>
    {% endif %}
  </div>
  {% with posts=posts %}
    {% if posts %}
      {% for post in posts %}
        <div class="card mb-3 shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="card-title mb-1"><a href="/blog/post/{{ post.slug }}/">{{ post.title|default_if_none:"(No title)" }}</a></h5>
                <div class="text-secondary small mb-2">by {{ post.author.username }} ‚Ä¢ {{ post.created_at|date:"M d, Y H:i" }} ‚Ä¢ ‚ù§Ô∏è {{ post.likes_count }}</div>
              </div>
              {% if post.type == 'article' %}
                <span class="badge text-bg-primary">üìù Article</span>
              {% elif post.type == 'post' %}
                <span class="badge text-bg-success">üí¨ Post</span>
              {% elif post.type == 'poll' %}
                <span class="badge text-bg-warning">üìä Poll</span>
              {% else %}
                <span class="badge text-bg-secondary">{{ post.type|title }}</span>
              {% endif %}
            </div>
            {% if post.type == 'poll' %}
              <div class="small text-secondary">Poll ‚Ä¢ {{ post.poll_options.count }} options</div>
            {% else %}
              <p class="card-text">{{ post.content|striptags|truncatewords:30 }}</p>
            {% endif %}
            <a class="card-link" href="/blog/post/{{ post.slug }}/">Read more</a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-secondary">No posts from people you follow yet.</p>
    {% endif %}
  {% endwith %}
{% endblock %}


